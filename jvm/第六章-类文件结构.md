# 第六章 类文件结构

##扯皮
> java文件经过编译器编译成class文件，java虚拟机再执行class文件。也就是说，只要符合class文件的规范，就可以被编译，这就为其他语言在jvm上运行提供了支持.并且，class文件在任何具有相应jre的环境都可以运行,这也就是著名的”一处编写，到处运行“；

注：这里的类文件指的是 经过编译器编译过的 class文件.

## class 类文件结构
类文件结构：
![class文件结构][1]

---
### 魔数&类文件版本
```
第一行：
    魔数：class文件的头4个字节，唯一作用是确定这个文件是否 是一个能被
    虚拟机接收的class文件

第二，三行：
    class文件的版本号：5~6字节为次版本号，7~8为主版本号.
```

### 常量池
```
第四行：
    常量池：存放字面量 和 符号引用 两大类常量.
    字面量：java代码中的文本字符串，声明为final的常量等。
    符号引用：1.类和接口的全限定名    2.字段的名称和描述符    3.方法的名称和描述符
    
动态连接：在class文件中，不会保存具体的方法和字段的最终内存布局信息，
只有在虚拟机运行时，才会从常量池中获取对应的引用，创建相应的对象.

```

### 访问标识
```
访问标识：用于识别一些类或者接口层次的访问信息.
    包括：这个class是类还是接口；是否定义为public类型，是否定义成abstract类型等
```

### 类索引，父类索引与接口索引集合
```
目的： class文件用这三个数据来确定这个类的即成关系.

类索引 ： 用于确定这个类的全限定名.
父类索引 : 用于确认父类的全限定名.
接口索引集合 ： 存放所有的接口集合.
```

### 字段表集合
```
字段表集合：用于描述接口或者类中声明的变量.
    字段：包括类级别变量（static 修饰）以及 实例级 变量，但是不包括方法内的变量 

```

### 方法表集合
```
方法表集合： 用于描述接口或者类中声明的方法.

方法表中的属性有 ： 访问标识，名称索引，描述符索引，属性表索引.

属性表集合中的“Code”属性： 存放经过编译器编译后的方法中的代码对应的字节码信息.
```


























  [1]: http://wiki.jikexueyuan.com/project/java-vm/images/classtable.jpg